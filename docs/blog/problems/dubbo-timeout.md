# 记一次基础服务故障导致上游系统大面积连锁反应问题排查 <!-- {docsify-ignore-all} -->


## 现象

&nbsp; &nbsp; 在某一时间段Nginx错误日志中大量的接口出现了504


## 问题排查


&nbsp; &nbsp; 所有报504的接口都是访问量大的接口，并且在逐个的进行日志排查过程中发现，全都指向请求签名验证的服务接口调用很慢，会有超时的情况。因为我们的RPC中间件用的是Dubbo，用的是默认的Dubbo容错策略，如果超时会选择另一台机器重试，所以定位到请求签名验证的服务的某一台机器在那个时间点出现了问题，导致那台机器CPU打满了。



## 解决方式

1. 替换掉那台机器（阿里云ECS）
2. 系统增加熔断降级机制